<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sentinel - AI Security Code Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body {
            background: #0f172a;
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }
        
        .code-editor {
            background: #0b1120;
            border: 1px solid #334155;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            transition: all 0.3s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(79, 70, 229, 0.4);
        }
        
        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px;
        }
        
        /* Custom height classes */
        .min-h-editor {
            min-height: 500px;
            height: 500px;
        }
        
        .max-h-results {
            max-height: 800px;
            overflow-y: auto;
        }
        
        /* Gradient backgrounds */
        .gradient-danger {
            background: linear-gradient(135deg, #dc2626, #991b1b);
        }
        
        .gradient-warning {
            background: linear-gradient(135deg, #ea580c, #9a3412);
        }
        
        .gradient-success {
            background: linear-gradient(135deg, #16a34a, #166534);
        }
        
        .gradient-info {
            background: linear-gradient(135deg, #0ea5e9, #0369a1);
        }
        
        .gradient-purple {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }
        
        /* Fix panel styling */
        .fix-panel {
            border-left: 4px solid #10b981;
            background: rgba(16, 185, 129, 0.1);
        }
        
        .vulnerability-card {
            transition: all 0.3s ease;
            border-left: 4px solid;
        }
        
        .vulnerability-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .critical-card { border-left-color: #dc2626; }
        .high-card { border-left-color: #ea580c; }
        .medium-card { border-left-color: #ca8a04; }
        .low-card { border-left-color: #16a34a; }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        
        function App() {
            // State variables
            const [code, setCode] = useState(`import sqlite3

def get_user_data(username):
    conn = sqlite3.connect('users.db')
    cursor = conn.cursor()
    # VULNERABLE: SQL Injection
    query = "SELECT * FROM users WHERE username = '" + username + "'"
    cursor.execute(query)
    data = cursor.fetchall()
    conn.close()
    return data

def render_profile(user_input):
    # VULNERABLE: XSS
    return "<h1>Profile for " + user_input + "</h1>"`);
            
            const [loading, setLoading] = useState(false);
            const [report, setReport] = useState(null);
            const [demoMode, setDemoMode] = useState(false);
            const [testResults, setTestResults] = useState([]);
            const [scanMode, setScanMode] = useState('code');
            const [githubUrl, setGithubUrl] = useState('');
            const [showThreatModel, setShowThreatModel] = useState(true);
            const [showCompliance, setShowCompliance] = useState(true);
            const [showAIFix, setShowAIFix] = useState(false);
            const [aiFixes, setAiFixes] = useState([]);
            const [selectedFix, setSelectedFix] = useState(null);
            
            // Sample AI fixes
            const sampleFixes = [
                {
                    id: 1,
                    vulnerability: 'SQL Injection',
                    originalCode: `query = "SELECT * FROM users WHERE username = '" + username + "'"`,
                    fixedCode: `query = "SELECT * FROM users WHERE username = ?"\ncursor.execute(query, (username,))`,
                    explanation: 'Changed to parameterized query to prevent SQL injection attacks',
                    benefits: ['Prevents SQL injection', 'Improves performance', 'Better code maintainability']
                },
                {
                    id: 2,
                    vulnerability: 'Cross-Site Scripting (XSS)',
                    originalCode: `return "<h1>Profile for " + user_input + "</h1>"`,
                    fixedCode: `import html\nreturn "<h1>Profile for " + html.escape(user_input) + "</h1>"`,
                    explanation: 'Added HTML escaping to prevent malicious script execution',
                    benefits: ['Prevents XSS attacks', 'Protects user data', 'OWASP compliant']
                },
                {
                    id: 3,
                    vulnerability: 'Hardcoded Database Path',
                    originalCode: `conn = sqlite3.connect('users.db')`,
                    fixedCode: `import os\nDB_PATH = os.getenv('DB_PATH', 'users.db')\nconn = sqlite3.connect(DB_PATH)`,
                    explanation: 'Moved database path to environment variable for security',
                    benefits: ['Configurable deployment', 'Better security', 'DevOps friendly']
                }
            ];
            
            // Start Demo Mode
            const startDemo = () => {
                setDemoMode(true);
                setLoading(true);
                
                setTimeout(() => {
                    const mockReport = {
                        score: 65,
                        risk: 'Critical',
                        issues: 2,
                        summary: 'Found SQL Injection and XSS vulnerabilities. Immediate remediation required.',
                        vulnerabilities: [
                            {
                                id: 1,
                                name: 'SQL Injection',
                                description: 'Direct concatenation of user input in SQL query allows SQL injection attacks',
                                severity: 'Critical',
                                location: 'Line 7-9',
                                fix: 'Use parameterized queries instead of string concatenation',
                                category: 'CWE-89',
                                cweDescription: 'Improper Neutralization of Special Elements used in an SQL Command'
                            },
                            {
                                id: 2,
                                name: 'Cross-Site Scripting (XSS)',
                                description: 'Unsanitized user input rendered in HTML allows script injection',
                                severity: 'High',
                                location: 'Line 12-13',
                                fix: 'Implement HTML escaping or use a templating engine',
                                category: 'CWE-79',
                                cweDescription: 'Improper Neutralization of Input During Web Page Generation'
                            }
                        ]
                    };
                    
                    setReport(mockReport);
                    setAiFixes(sampleFixes);
                    setLoading(false);
                    
                    setTimeout(() => {
                        setTestResults([
                            { test: 'SQL Injection Prevention', status: '‚úÖ PASSED', detail: 'Parameterized queries implemented successfully' },
                            { test: 'XSS Protection', status: '‚úÖ PASSED', detail: 'HTML encoding verified across all outputs' },
                            { test: 'Performance Impact', status: '‚ö†Ô∏è WARNING', detail: 'Minimal 2% performance impact detected' },
                            { test: 'Code Readability', status: '‚úÖ PASSED', detail: 'Improved code structure with comments' },
                            { test: 'Memory Usage', status: '‚úÖ PASSED', detail: 'Optimal memory consumption maintained' }
                        ]);
                    }, 1000);
                }, 2000);
            };
            
            // Generate AI Fixes
            const generateAIFixes = () => {
                setShowAIFix(true);
                setAiFixes(sampleFixes);
                setSelectedFix(sampleFixes[0]);
                alert('üöÄ AI has generated fixes for all vulnerabilities!');
            };
            
            // Apply selected fix
            const applyFix = (fix) => {
                if (fix) {
                    setCode(prevCode => {
                        // Simple fix application simulation
                        return prevCode.replace(
                            'query = "SELECT * FROM users WHERE username = \'" + username + "\'"',
                            'query = "SELECT * FROM users WHERE username = ?"\n    cursor.execute(query, (username,))'
                        );
                    });
                    alert(`‚úÖ Applied fix for ${fix.vulnerability}`);
                }
            };
            
            // AI Fix Panel Component
            const AIFixPanel = () => (
                showAIFix && aiFixes.length > 0 && (
                    <div className="fix-panel rounded-xl p-6 mb-6 animate-fade-in">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-bold text-emerald-400">
                                <i className="fas fa-robot mr-2"></i>
                                AI-Powered Fixes
                            </h3>
                            <button 
                                onClick={() => setShowAIFix(false)}
                                className="text-slate-400 hover:text-slate-300"
                            >
                                <i className="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-6">
                            {aiFixes.map(fix => (
                                <button
                                    key={fix.id}
                                    onClick={() => setSelectedFix(fix)}
                                    className={`p-4 rounded-lg text-left transition-all ${
                                        selectedFix?.id === fix.id 
                                            ? 'bg-emerald-500/20 border border-emerald-500/30' 
                                            : 'bg-slate-800/50 hover:bg-slate-700/50'
                                    }`}
                                >
                                    <div className="flex items-center gap-2 mb-2">
                                        <i className="fas fa-bug text-red-400"></i>
                                        <span className="font-semibold text-slate-200">{fix.vulnerability}</span>
                                    </div>
                                    <p className="text-sm text-slate-400 truncate">{fix.explanation}</p>
                                </button>
                            ))}
                        </div>
                        
                        {selectedFix && (
                            <div className="bg-slate-900/50 rounded-lg p-5 border border-slate-700">
                                <div className="flex justify-between items-start mb-4">
                                    <div>
                                        <h4 className="text-lg font-semibold text-slate-200">{selectedFix.vulnerability}</h4>
                                        <p className="text-sm text-slate-400">{selectedFix.explanation}</p>
                                    </div>
                                    <button 
                                        onClick={() => applyFix(selectedFix)}
                                        className="px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white rounded-lg font-medium"
                                    >
                                        <i className="fas fa-check mr-2"></i>
                                        Apply Fix
                                    </button>
                                </div>
                                
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h5 className="text-sm font-medium text-red-300 mb-2">
                                            <i className="fas fa-times-circle mr-2"></i>
                                            Vulnerable Code
                                        </h5>
                                        <div className="bg-red-900/20 p-3 rounded font-mono text-sm">
                                            <code className="text-red-300">{selectedFix.originalCode}</code>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <h5 className="text-sm font-medium text-emerald-300 mb-2">
                                            <i className="fas fa-check-circle mr-2"></i>
                                            AI-Fixed Code
                                        </h5>
                                        <div className="bg-emerald-900/20 p-3 rounded font-mono text-sm">
                                            <code className="text-emerald-300">{selectedFix.fixedCode}</code>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="mt-4">
                                    <h5 className="text-sm font-medium text-blue-300 mb-2">
                                        <i className="fas fa-star mr-2"></i>
                                        Benefits
                                    </h5>
                                    <div className="flex flex-wrap gap-2">
                                        {selectedFix.benefits.map((benefit, idx) => (
                                            <span key={idx} className="px-3 py-1 bg-blue-500/10 text-blue-400 rounded-full text-sm">
                                                {benefit}
                                            </span>
                                        ))}
                                    </div>
                                </div>
                                
                                <div className="mt-6 flex justify-between">
                                    <button className="px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg">
                                        <i className="fas fa-copy mr-2"></i>
                                        Copy Fix
                                    </button>
                                    <button className="px-4 py-2 bg-purple-600 hover:bg-purple-500 text-white rounded-lg">
                                        <i className="fas fa-download mr-2"></i>
                                        Download Patch
                                    </button>
                                    <button className="px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium">
                                        <i className="fas fa-magic mr-2"></i>
                                        Apply All Fixes
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                )
            );
            
            return (
                <div className="min-h-screen flex flex-col">
                    {/* Header */}
                    <header className="glass border-b border-slate-800 py-4">
                        <div className="max-w-7xl mx-auto px-4 flex justify-between items-center">
                            <div className="flex items-center gap-3">
                                <div className="p-2 bg-indigo-500/20 rounded-lg">
                                    <i className="fas fa-shield-alt text-indigo-400 text-xl"></i>
                                </div>
                                <div>
                                    <h1 className="text-2xl font-bold bg-gradient-to-r from-indigo-400 to-purple-400 bg-clip-text text-transparent">
                                        Sentinel
                                    </h1>
                                    <p className="text-sm text-slate-500">AI Security Analyzer</p>
                                </div>
                            </div>
                            <div className="flex items-center gap-4">
                                <button className="px-3 py-1.5 text-slate-400 hover:text-slate-300 text-sm">
                                    <i className="fas fa-history mr-1"></i>
                                    History
                                </button>
                                <button 
                                    onClick={() => setShowThreatModel(!showThreatModel)}
                                    className={`px-3 py-1.5 rounded text-sm ${showThreatModel ? 'bg-orange-600/20 text-orange-400' : 'text-slate-400'}`}
                                >
                                    <i className="fas fa-crosshairs mr-1"></i>
                                    Threat Model
                                </button>
                                <button className="px-3 py-1.5 text-slate-400 hover:text-slate-300 text-sm">
                                    <i className="fas fa-download mr-1"></i>
                                    Export
                                </button>
                                <span className="px-3 py-1 bg-indigo-900/30 border border-indigo-700/50 rounded-full text-xs text-indigo-300">
                                    <i className="fas fa-bolt mr-2"></i>
                                    Gemini 3 Pro
                                </span>
                                <button 
                                    onClick={startDemo}
                                    className="px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg font-medium"
                                >
                                    <i className="fas fa-play mr-2"></i>
                                    Demo Mode
                                </button>
                            </div>
                        </div>
                    </header>
                    
                    <main className="flex-1 max-w-7xl mx-auto px-4 py-8">
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            {/* Left Column - Editor */}
                            <div className="space-y-6">
                                {/* Scan Mode Toggle */}
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => setScanMode('code')}
                                        className={`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${
                                            scanMode === 'code' 
                                                ? 'btn-primary text-white' 
                                                : 'bg-slate-800 text-slate-400 hover:bg-slate-700'
                                        }`}
                                    >
                                        <i className="fas fa-code"></i>
                                        Paste Code
                                    </button>
                                    <button
                                        onClick={() => setScanMode('github')}
                                        className={`px-4 py-2 rounded-lg font-medium flex items-center gap-2 ${
                                            scanMode === 'github' 
                                                ? 'btn-primary text-white' 
                                                : 'bg-slate-800 text-slate-400 hover:bg-slate-700'
                                        }`}
                                    >
                                        <i className="fab fa-github"></i>
                                        GitHub Repo
                                    </button>
                                </div>
                                
                                {/* GitHub Input */}
                                {scanMode === 'github' && (
                                    <div className="flex gap-2">
                                        <input
                                            type="text"
                                            value={githubUrl}
                                            onChange={(e) => setGithubUrl(e.target.value)}
                                            placeholder="https://github.com/username/repository"
                                            className="flex-1 bg-slate-900 border border-slate-700 text-white rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 outline-none"
                                        />
                                        <button className="px-4 py-2 bg-gradient-to-r from-emerald-600 to-cyan-600 text-white rounded-lg font-medium">
                                            <i className="fab fa-github mr-2"></i>
                                            Scan
                                        </button>
                                    </div>
                                )}
                                
                                {/* Code Editor */}
                                <div className="code-editor min-h-editor">
                                    <div className="p-3 bg-slate-800/50 border-b border-slate-800 flex justify-between">
                                        <span className="text-slate-300 font-medium">
                                            <i className="fas fa-file-code mr-2"></i>
                                            source.py
                                        </span>
                                        <select className="bg-slate-900 text-slate-300 px-2 py-1 rounded text-sm">
                                            <option>Python</option>
                                            <option>JavaScript</option>
                                            <option>TypeScript</option>
                                            <option>Java</option>
                                            <option>Go</option>
                                        </select>
                                    </div>
                                    
                                    <textarea 
                                        className="w-full h-[400px] bg-transparent text-slate-300 p-4 font-mono focus:outline-none resize-none"
                                        value={code}
                                        onChange={(e) => setCode(e.target.value)}
                                        spellCheck={false}
                                    />
                                    
                                    <div className="p-4 bg-slate-800/30 border-t border-slate-800 flex justify-between">
                                        <button className="px-4 py-2 text-slate-400 hover:text-red-400">
                                            <i className="fas fa-trash mr-2"></i>
                                            Clear
                                        </button>
                                        <button 
                                            onClick={startDemo}
                                            className="px-4 py-2 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-lg font-medium"
                                        >
                                            <i className="fas fa-rocket mr-2"></i>
                                            Demo Mode
                                        </button>
                                        <button 
                                            onClick={() => setLoading(true)}
                                            disabled={loading}
                                            className="px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-medium disabled:opacity-50"
                                        >
                                            {loading ? (
                                                <>
                                                    <i className="fas fa-spinner animate-spin mr-2"></i>
                                                    Analyzing...
                                                </>
                                            ) : (
                                                <>
                                                    <i className="fas fa-search mr-2"></i>
                                                    Scan Code
                                                </>
                                            )}
                                        </button>
                                    </div>
                                </div>
                                
                                {/* Demo Mode Alert */}
                                {demoMode && (
                                    <div className="p-4 bg-amber-600/10 border border-amber-500/30 rounded-lg animate-pulse">
                                        <div className="flex items-center gap-3">
                                            <i className="fas fa-play-circle text-amber-400 text-xl"></i>
                                            <div>
                                                <h3 className="font-medium text-amber-300">Demo Mode Active</h3>
                                                <p className="text-sm text-amber-400/70">Automatic vulnerability detection in progress</p>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                            
                            {/* Right Column - Results */}
                            <div className="max-h-results space-y-6 overflow-y-auto pr-2">
                                {/* AI Fix Panel */}
                                <AIFixPanel />
                                
                                {loading && !report ? (
                                    <div className="flex flex-col items-center justify-center p-12 border-2 border-dashed border-slate-800 rounded-xl">
                                        <div className="w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mb-4"></div>
                                        <h3 className="text-xl font-semibold text-slate-300">AI Analysis in Progress</h3>
                                        <p className="text-slate-500 mt-2">Scanning for security vulnerabilities...</p>
                                    </div>
                                ) : report ? (
                                    <div className="space-y-6 animate-fade-in">
                                        {/* Summary Cards */}
                                        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                                            <div className="gradient-danger rounded-xl p-6 flex flex-col items-center justify-center">
                                                <div className="text-4xl font-bold text-white mb-2">{report.score}%</div>
                                                <div className="text-sm text-red-200">Security Score</div>
                                            </div>
                                            
                                            <div className="gradient-warning rounded-xl p-6 flex flex-col justify-center">
                                                <div className="text-xs text-orange-200 uppercase mb-2">Risk Level</div>
                                                <div className="flex items-center gap-3">
                                                    <i className="fas fa-shield-alt text-2xl text-orange-300"></i>
                                                    <span className="text-2xl font-bold text-white">
                                                        {report.risk}
                                                    </span>
                                                </div>
                                                <p className="text-xs text-orange-200 mt-2">Based on found vulnerabilities severity</p>
                                            </div>
                                            
                                            <div className="gradient-info rounded-xl p-6 flex flex-col justify-center">
                                                <div className="text-xs text-blue-200 uppercase mb-2">Issues Found</div>
                                                <div className="flex items-center gap-3">
                                                    <i className="fas fa-bug text-2xl text-blue-300"></i>
                                                    <span className="text-3xl font-bold text-white">{report.issues}</span>
                                                </div>
                                                <div className="flex gap-2 mt-3">
                                                    <span className="text-xs px-2 py-0.5 rounded bg-red-500/20 text-red-300 border border-red-500/30">
                                                        {report.vulnerabilities.filter(v => v.severity === 'Critical' || v.severity === 'High').length} Critical/High
                                                    </span>
                                                    <span className="text-xs px-2 py-0.5 rounded bg-yellow-500/20 text-yellow-300 border border-yellow-500/30">
                                                        {report.vulnerabilities.filter(v => v.severity === 'Medium').length} Medium
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* AI Summary */}
                                        <div className="glass rounded-xl p-6">
                                            <h3 className="text-sm font-semibold text-indigo-400 uppercase tracking-wider mb-3 flex items-center gap-2">
                                                <i className="fas fa-check-circle"></i>
                                                Analysis Summary
                                            </h3>
                                            <p className="text-slate-300 leading-relaxed">
                                                {report.summary}
                                            </p>
                                        </div>
                                        
                                        {/* Security Dashboard */}
                                        <div className="glass rounded-xl p-6">
                                            <h3 className="text-lg font-semibold text-cyan-400 mb-4 flex items-center gap-2">
                                                <i className="fas fa-chart-line"></i>
                                                Security Dashboard
                                            </h3>
                                            
                                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-4">
                                                <div className="text-center p-3 bg-black/30 rounded-lg">
                                                    <div className="text-2xl font-bold text-emerald-400">87%</div>
                                                    <div className="text-xs text-slate-400">Security Score</div>
                                                </div>
                                                <div className="text-center p-3 bg-black/30 rounded-lg">
                                                    <div className="text-2xl font-bold text-red-400">3</div>
                                                    <div className="text-xs text-slate-400">Critical Issues</div>
                                                </div>
                                                <div className="text-center p-3 bg-black/30 rounded-lg">
                                                    <div className="text-2xl font-bold text-blue-400">24h</div>
                                                    <div className="text-xs text-slate-400">Last Scan</div>
                                                </div>
                                                <div className="text-center p-3 bg-black/30 rounded-lg">
                                                    <div className="text-2xl font-bold text-purple-400">12</div>
                                                    <div className="text-xs text-slate-400">Files Protected</div>
                                                </div>
                                            </div>
                                            
                                            <div className="p-4 bg-black/20 rounded-lg">
                                                <div className="flex items-center justify-between mb-2">
                                                    <span className="text-sm text-slate-300">Security Trend (Last 7 days)</span>
                                                    <span className="text-xs text-emerald-400">‚Üë Improving</span>
                                                </div>
                                                <div className="flex items-end h-12 gap-1">
                                                    {[40, 55, 60, 70, 75, 80, 87].map((height, i) => (
                                                        <div 
                                                            key={i}
                                                            className={`flex-1 rounded-t ${height > 70 ? 'bg-emerald-500' : 'bg-yellow-500'}`}
                                                            style={{ height: `${height}%` }}
                                                        ></div>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* AI-Verified Fix Testing */}
                                        <div className="glass rounded-xl p-6 border border-blue-800/30">
                                            <h3 className="text-lg font-semibold text-cyan-400 mb-4 flex items-center gap-2">
                                                <i className="fas fa-vial"></i>
                                                AI-Verified Fix Testing
                                            </h3>
                                            <div className="space-y-2">
                                                {testResults.map((result, i) => (
                                                    <div key={i} className="flex items-center justify-between p-3 bg-black/30 rounded-lg">
                                                        <div>
                                                            <span className="font-medium text-slate-200">{result.test}</span>
                                                            <p className="text-xs text-slate-400">{result.detail}</p>
                                                        </div>
                                                        <span className={`px-3 py-1 rounded-full text-sm font-medium ${
                                                            result.status.includes('PASSED') ? 'bg-emerald-500/20 text-emerald-400' :
                                                            result.status.includes('WARNING') ? 'bg-yellow-500/20 text-yellow-400' :
                                                            'bg-red-500/20 text-red-400'
                                                        }`}>
                                                            {result.status}
                                                        </span>
                                                    </div>
                                                ))}
                                            </div>
                                            <button className="w-full mt-4 py-2 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg text-sm font-medium">
                                                <i className="fas fa-vial-circle-check mr-2"></i>
                                                Run Full Test Suite
                                            </button>
                                        </div>
                                        
                                        {/* Compliance Check */}
                                        <div className="glass rounded-xl p-6 border border-purple-800/30">
                                            <h3 className="text-lg font-semibold text-purple-400 mb-4 flex items-center gap-2">
                                                <i className="fas fa-clipboard-check"></i>
                                                Compliance Check
                                            </h3>
                                            
                                            <div className="grid grid-cols-2 gap-3 mb-4">
                                                <div className="flex items-center justify-between p-3 bg-black/30 rounded-lg">
                                                    <div className="flex items-center gap-3">
                                                        <span className="text-xl">üõ°Ô∏è</span>
                                                        <span className="text-sm font-medium text-slate-200">OWASP Top 10</span>
                                                    </div>
                                                    <span className="px-2 py-1 rounded text-xs font-medium bg-emerald-500/20 text-emerald-400">
                                                        ‚úÖ Compliant
                                                    </span>
                                                </div>
                                                <div className="flex items-center justify-between p-3 bg-black/30 rounded-lg">
                                                    <div className="flex items-center gap-3">
                                                        <span className="text-xl">üá™üá∫</span>
                                                        <span className="text-sm font-medium text-slate-200">GDPR</span>
                                                    </div>
                                                    <span className="px-2 py-1 rounded text-xs font-medium bg-yellow-500/20 text-yellow-400">
                                                        ‚ö†Ô∏è Partial
                                                    </span>
                                                </div>
                                                <div className="flex items-center justify-between p-3 bg-black/30 rounded-lg">
                                                    <div className="flex items-center gap-3">
                                                        <span className="text-xl">üí≥</span>
                                                        <span className="text-sm font-medium text-slate-200">PCI-DSS</span>
                                                    </div>
                                                    <span className="px-2 py-1 rounded text-xs font-medium bg-red-500/20 text-red-400">
                                                        ‚ùå Needs Work
                                                    </span>
                                                </div>
                                                <div className="flex items-center justify-between p-3 bg-black/30 rounded-lg">
                                                    <div className="flex items-center gap-3">
                                                        <span className="text-xl">üè•</span>
                                                        <span className="text-sm font-medium text-slate-200">HIPAA</span>
                                                    </div>
                                                    <span className="px-2 py-1 rounded text-xs font-medium bg-emerald-500/20 text-emerald-400">
                                                        ‚úÖ Compliant
                                                    </span>
                                                </div>
                                            </div>
                                            
                                            <button className="w-full py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg text-sm font-medium">
                                                <i className="fas fa-file-export mr-2"></i>
                                                Generate Compliance Report
                                            </button>
                                        </div>
                                        
                                        {/* Vulnerabilities List */}
                                        <div className="space-y-4">
                                            <div className="flex items-center justify-between">
                                                <h3 className="text-lg font-semibold text-slate-200">Detected Vulnerabilities</h3>
                                                <button 
                                                    onClick={generateAIFixes}
                                                    className="px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg text-sm font-medium"
                                                >
                                                    <i className="fas fa-magic mr-2"></i>
                                                    Fix All with AI
                                                </button>
                                            </div>
                                            
                                            {report.vulnerabilities.map(vuln => (
                                                <div key={vuln.id} className={`vulnerability-card p-4 rounded-lg bg-slate-900/50 ${
                                                    vuln.severity === 'Critical' ? 'critical-card' :
                                                    vuln.severity === 'High' ? 'high-card' :
                                                    vuln.severity === 'Medium' ? 'medium-card' : 'low-card'
                                                }`}>
                                                    <div className="flex justify-between items-start mb-2">
                                                        <div>
                                                            <h4 className="font-semibold text-slate-200">{vuln.name}</h4>
                                                            <div className="flex items-center gap-2 mt-1">
                                                                <span className="text-xs px-2 py-0.5 bg-slate-800 rounded">{vuln.category}</span>
                                                                <span className="text-xs text-slate-500">{vuln.cweDescription}</span>
                                                            </div>
                                                        </div>
                                                        <span className={`text-sm font-bold ${
                                                            vuln.severity === 'Critical' ? 'text-red-400' :
                                                            vuln.severity === 'High' ? 'text-orange-400' :
                                                            'text-yellow-400'
                                                        }`}>
                                                            {vuln.severity}
                                                        </span>
                                                    </div>
                                                    <p className="text-sm text-slate-400 mb-3">{vuln.description}</p>
                                                    <div className="flex justify-between items-center">
                                                        <div className="text-xs text-slate-500">Location: {vuln.location}</div>
                                                        <button className="text-sm text-indigo-400 hover:text-indigo-300">
                                                            <i className="fas fa-wrench mr-1"></i>
                                                            Show AI Fix
                                                        </button>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                        
                                        {/* Advanced Analysis */}
                                        <div className="glass rounded-xl p-6">
                                            <h3 className="text-lg font-semibold text-purple-400 mb-4">
                                                <i className="fas fa-microscope mr-2"></i>
                                                Advanced Analysis
                                            </h3>
                                            
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                                <div className="bg-black/30 p-4 rounded-lg">
                                                    <h4 className="font-medium text-yellow-300 mb-2">
                                                        <i className="fas fa-exclamation-triangle mr-2"></i>
                                                        Business Logic Risks
                                                    </h4>
                                                    <ul className="text-sm text-slate-300 space-y-1">
                                                        <li>‚Ä¢ Missing input validation in user functions</li>
                                                        <li>‚Ä¢ No rate limiting on database queries</li>
                                                        <li>‚Ä¢ Direct object references without authorization</li>
                                                        <li>‚Ä¢ Hardcoded database connection strings</li>
                                                    </ul>
                                                </div>
                                                
                                                <div className="bg-black/30 p-4 rounded-lg">
                                                    <h4 className="font-medium text-orange-300 mb-2">
                                                        <i className="fas fa-shield-alt mr-2"></i>
                                                        Architecture Risks
                                                    </h4>
                                                    <ul className="text-sm text-slate-300 space-y-1">
                                                        <li>‚Ä¢ Single point of failure (single database)</li>
                                                        <li>‚Ä¢ No connection pooling implemented</li>
                                                        <li>‚Ä¢ In-memory data handling without encryption</li>
                                                        <li>‚Ä¢ Missing audit logging for security events</li>
                                                    </ul>
                                                </div>
                                            </div>
                                            
                                            <div className="p-4 bg-gradient-to-r from-indigo-900/20 to-blue-900/20 rounded-lg border border-indigo-800/30">
                                                <h4 className="font-medium text-indigo-300 mb-2">
                                                    <i className="fas fa-lightbulb mr-2"></i>
                                                    AI-Powered Recommendations
                                                </h4>
                                                <div className="text-sm text-slate-300 space-y-2">
                                                    <div className="flex items-start gap-2">
                                                        <i className="fas fa-check text-emerald-400 mt-1"></i>
                                                        <span>Implement parameterized queries across all database interactions</span>
                                                    </div>
                                                    <div className="flex items-start gap-2">
                                                        <i className="fas fa-check text-emerald-400 mt-1"></i>
                                                        <span>Add HTML encoding library for all user-facing outputs</span>
                                                    </div>
                                                    <div className="flex items-start gap-2">
                                                        <i className="fas fa-check text-emerald-400 mt-1"></i>
                                                        <span>Consider using an ORM for built-in SQL injection protection</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        {/* AI Threat Modeling */}
                                        {showThreatModel && (
                                            <div className="glass rounded-xl p-6 border border-orange-800/30">
                                                <h3 className="text-lg font-semibold text-orange-400 mb-4">
                                                    <i className="fas fa-crosshairs mr-2"></i>
                                                    AI Threat Modeling
                                                </h3>
                                                
                                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                                    <div className="bg-black/30 p-4 rounded-lg">
                                                        <h4 className="font-medium text-red-300 mb-2">
                                                            <i className="fas fa-exclamation-triangle mr-2"></i>
                                                            Attack Scenarios
                                                        </h4>
                                                        <div className="space-y-3">
                                                            <div className="flex items-start gap-2">
                                                                <div className="w-2 h-2 mt-2 rounded-full bg-red-500"></div>
                                                                <div>
                                                                    <span className="text-red-400 font-medium">SQL Injection</span>
                                                                    <p className="text-slate-400 text-xs">‚Üí Database dump, admin bypass, data theft</p>
                                                                </div>
                                                            </div>
                                                            <div className="flex items-start gap-2">
                                                                <div className="w-2 h-2 mt-2 rounded-full bg-orange-500"></div>
                                                                <div>
                                                                    <span className="text-orange-400 font-medium">XSS Attack</span>
                                                                    <p className="text-slate-400 text-xs">‚Üí Session hijacking, credential theft</p>
                                                                </div>
                                                            </div>
                                                            <div className="flex items-start gap-2">
                                                                <div className="w-2 h-2 mt-2 rounded-full bg-yellow-500"></div>
                                                                <div>
                                                                    <span className="text-yellow-400 font-medium">Business Logic</span>
                                                                    <p className="text-slate-400 text-xs">‚Üí Financial fraud, data manipulation</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div className="bg-black/30 p-4 rounded-lg">
                                                        <h4 className="font-medium text-emerald-300 mb-2">
                                                            <i className="fas fa-shield-alt mr-2"></i>
                                                            Risk Mitigation
                                                        </h4>
                                                        <div className="space-y-3">
                                                            <div className="flex items-start gap-2">
                                                                <i className="fas fa-check text-emerald-400 mt-1"></i>
                                                                <div>
                                                                    <span className="text-emerald-300 font-medium">Parameterized queries</span>
                                                                    <p className="text-slate-400 text-xs">Blocks SQL injection attacks</p>
                                                                </div>
                                                            </div>
                                                            <div className="flex items-start gap-2">
                                                                <i className="fas fa-check text-emerald-400 mt-1"></i>
                                                                <div>
                                                                    <span className="text-emerald-300 font-medium">Input validation</span>
                                                                    <p className="text-slate-400 text-xs">Prevents injection attacks</p>
                                                                </div>
                                                            </div>
                                                            <div className="flex items-start gap-2">
                                                                <i className="fas fa-check text-emerald-400 mt-1"></i>
                                                                <div>
                                                                    <span className="text-emerald-300 font-medium">Output encoding</span>
                                                                    <p className="text-slate-400 text-xs">Stops XSS attacks</p>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div className="p-4 bg-gradient-to-r from-red-900/30 to-orange-900/30 rounded-lg border border-red-800/30">
                                                    <h4 className="font-medium text-red-300 mb-2">
                                                        <i className="fas fa-robot mr-2"></i>
                                                        AI Attack Simulation
                                                    </h4>
                                                    <p className="text-sm text-slate-300">
                                                        Based on analysis, an attacker could: 1) Inject SQL payloads to dump database, 
                                                        2) Use stolen credentials to access admin panel, 3) Upload malicious scripts, 
                                                        4) Establish persistence for data exfiltration.
                                                    </p>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                ) : (
                                    <div className="flex flex-col items-center justify-center p-12 border-2 border-dashed border-slate-800 rounded-xl">
                                        <i className="fas fa-code text-4xl text-slate-600 mb-4"></i>
                                        <h3 className="text-xl font-semibold text-slate-300">Ready for Analysis</h3>
                                        <p className="text-slate-500 max-w-sm mt-2 text-center">
                                            Paste your code and click "Scan Code" to detect security vulnerabilities
                                        </p>
                                        <button 
                                            onClick={startDemo}
                                            className="mt-6 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-medium"
                                        >
                                            <i className="fas fa-play mr-2"></i>
                                            Try Demo Mode
                                        </button>
                                    </div>
                                )}
                            </div>
                        </div>
                    </main>
                    
                    <footer className="border-t border-slate-800 py-6 text-center text-slate-600 text-sm">
                        <p>&copy; 2024 Sentinel Security Analyzer | Built for Gemini 3 Hackathon</p>
                        <p className="mt-1 text-xs text-slate-700">AI-powered code security scanning with automatic fixes</p>
                    </footer>
                    
                    <button className="fixed bottom-6 right-6 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg shadow-lg">
                        <i className="fas fa-video mr-2"></i>
                        Record Demo
                    </button>
                </div>
            );
        }
        
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
